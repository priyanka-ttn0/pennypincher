name: BuildAndPushZip

on:
  push:
    branches:
      - build_&_push_zip_to_s3bucket_using_githubactions

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Create zip
      run: bash ZipCode.sh 

    - name: push Zip to s3 
      run: aws s3 cp /tmp/penny/penny.zip s3://testbucket2700/
      env:
        LOCAL_PATH: '/tmp/penny/'
        AWS_S3_BUCKET: '${{secrets.AWS_S3_BUCKET_NAME}}'
        AWS_ACCESS_KEY_ID: ${{secrets.AWS_ACCESS_KEY_ID}}
        AWS_SECRET_ACCESS_KEY: ${{secrets.AWS_SECRET_ACCESS_KEY}}
        AWS_DEFAULT_REGION: 'us-east-2'